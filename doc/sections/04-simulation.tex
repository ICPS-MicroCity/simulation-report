\section{The Simulation}

In this section, we discuss the main elements of the simulation. To fully understand the concepts that are discussed here, such as nodes and programs, please refer to the \href{https://alchemistsimulator.github.io/}{Alchemist documentation}.

\subsection{Map Environment}
The simulation concerns an existing geographical location, that is the amusement park of \href{https://www.mirabilandia.it/}{\textit{Mirabilandia}}. For this reason, the environment of the simulation must be a map featuring existing paths in the real world. To achieve this, \textit{Alchemist} allows to use maps provided by \href{https://www.openstreetmap.org/}{\textit{OpenStreetMap}}, the free wiki world map. \textit{OpenStreetMap} provides navigation capabilities on the whole planet; such data, weighs about 50GB, thus it is recommended to use an extract with the data relative to the interested area. One great way to obtain an extract is through \href{https://extract.bbbike.org/}{\textit{BBBike}} \cite{Pianini_2013}.

Once extracted the map in the \texttt{.pbf} format, it is possible to build the simulation environment through the \href{https://alchemistsimulator.github.io/reference/kdoc/alchemist/it.unibo.alchemist.model.implementations.environments/-o-s-m-environment/}{\texttt{OSMEnvornment}}, as shown in the following listing (\ref{code:osm}).

\begin{lstlisting}[language=yaml, label=code:osm, caption=Building an \textit{OpenStreetMap} environment.]
# Use an OpenStreetMap Environment,
# deploying nodes only on streets.
environment:
  type: OSMEnvironment
  parameters: [mirabilandia.osm.pbf, true]
\end{lstlisting}

\noindent
The constructor of the environment accepts two parameters:
\begin{itemize}
    \item \texttt{file: String}, the path to the file containing the exported map;
    \item \texttt{onlyOnStreets: Boolean}, a boolean value allowing to deploy nodes only on the streets.
\end{itemize}

\subsection{Deployed Nodes}
After setting the environment, it is essential to deploy \textbf{nodes} on the map. In the current simulation, the elements that are represented by nodes are:
\begin{itemize}
    \item \textbf{Visitors}, as single individuals or groups; the key point here is that a node should correspond to one or more people using a single wearable device that tracks and guides its carrier.
    \item \textbf{Attractions}, that can be of different types, such as rides, water slides, restaurants, etc.; they are considered \textit{rendesvouz} points for visitors and are made of several sensors that allow to keep track of many information, such as the number of people waiting in a queue.
\end{itemize}

\subsection{Programmed Behaviours}

\subsection{Data Extraction}